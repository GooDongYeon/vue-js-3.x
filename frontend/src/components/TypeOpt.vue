<template>
  <div class="opt-container">
    <div class="comp-text">
      <p class="p-text-t">
        전체
      </p>
      <div class="brand-text">
        <button
          v-for="segment in getData.segments"
          :key="segment"
          :v-model="t_text"
          :value="segment.segment"
          class="item"
          @click="changeText">
          {{ segment.segment }}
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted, defineEmits } from 'vue'
import { URL } from '@/components/global'
import axios from 'axios'

const t_text = ref('')

const isRend = ref(false)
const getData = reactive({
  brands: [],
  segments: [],
  cars: [],
})

const getSegment = async () => {
  try {
    const res = await axios.get(URL + '/segment/all')
    isRend.value = !isRend.value
    getData.segments = res.data
    console.log('brand data : ', res.data)
  } catch (error) {
    console.log('모델 주세요', error)
  }
}

// 클릭한 값으로 변경하기 위해 상위 컴포넌트와 연동
const emit = defineEmits('changeEvent_t')
const changeText = event => {
  console.log(event.target.value)
  if (event.target.classList.contains('item')) emit('changeEvent', event.target.value)
}

onMounted(() => {
  getSegment()
})

</script>

<style scoped>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Open+Sans:ital,wght@0,300;0,600;1,300;1,600&family=Poor+Story&family=Poppins:wght@300;400;500;600;700&display=swap');
@import '@/assets/Opt.css';
</style>
